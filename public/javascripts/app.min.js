/*! prime_peer_db_01 2015-10-07 */
$(function(){function a(){console.log("fired"),$.ajax({type:"GET",url:"/assignments"}).done(function(a){if(c!=a.length){$(".studentInfo").remove(),c=0;for(var d=0;d<a.length;d++){var e=$("<div class ='studentInfo'><ul><li>Student Name: "+a[d].student_name+"</li><li class='studentID' id = '"+a[d].id+"'>Student ID: "+a[d].id+"</li><li>Assignment Number: "+a[d].assignment_number+"</li><li>Student Score: "+a[d].score+"</li><li>Date Completed: "+a[d].date_completed+"</li></ul><button class='remove'>Remove Record</button></div>");$(".appendHere").append(e),b()}}console.log(c)})}function b(){c++}$(".assignmentForm").submit(function(b){b.preventDefault();var c=$(".assignmentForm").serialize();$.ajax({type:"POST",url:"/assignments/add",data:c}).done(function(b){console.log("Success!"),a()}),$("input[type=text], input[type=number]").val("")});var c=0;setInterval(a,5e3),$(document).on("click",".remove",function(){console.log("yes!");var a=$(this).parent().children("ul").children(".studentID").attr("id");$.ajax({type:"DELETE",url:"/assignments/remove/"+a}).done(function(a){console.log("deleted")}),$(this).parent().remove()})});